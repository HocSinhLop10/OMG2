--[[

 _   _    _   _   _____     _       ___     _   _   _   _   ____   
| | | |  | | | | |_   _|   / \     / _ \   | | | | | | | | | __ )  
| |_| |  | | | |   | |    / _ \   | | | |  | |_| | | | | | |  _ \  
|  _  |  | | | |   | |   / ___ \  | |_| |  |  _  | | |_| | | |_) | 
\_| |_/   \___/    \_/  /_/   \_\  \___/   \_| |_/  \___/  |____/

                        Hutao Hub
]]

---------------------------------------------------------------------------------

local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/SLK-gaming/Fluent/refs/heads/main/SaveManager.lua.txt"))()

local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/SLK-gaming/Fluent/refs/heads/main/InterfaceManager.lua.txt"))()

local minimizeUI = Enum.KeyCode.RightAlt

-- ðŸŸ¢ Create Main UI
local Window = Fluent:CreateWindow({
    Title = "Hutao Hub [Free] | Grow A Garden",
    SubTitle = "Version 0.0.0",
    TabWidth = 160,
    Size = UDim2.fromOffset(480, 360),
    Acrylic = false,
    Theme = "Darker",
    MinimizeKey = minimizeUI
})

-- Tabs
local Tabs = {
    About = Window:AddTab({ Title = "About", Icon = "rbxassetid://121302760641013"}),
    Main = Window:AddTab({ Title = "Main", Icon = "rbxassetid://121302760641013" }),
    Player = Window:AddTab({ Title = "Player", Icon = "rbxassetid://121302760641013" }),
    Shop = Window:AddTab({ Title = "Shop", Icon = "rbxassetid://121302760641013" }),
    Visual = Window:AddTab({ Title = "Visual", Icon = "rbxassetid://121302760641013" }),
    Misc = Window:AddTab({ Title = "Misc", Icon = "rbxassetid://121302760641013" }),
    Settings = Window:AddTab({ Title = "Settings", Icon = "rbxassetid://121302760641013" }),
}  

-- Tab.Dev

local Options = Fluent.Options


    Tabs.About:AddParagraph({
        Title = "Note",
        Content = "Thank you for using the script!"
    })

    Tabs.About:AddSection("â†³ Links")

    Tabs.About:AddButton({
        Title = "Discord",
        Description = "Copy the link to join the discord!",
        Callback = function()
            setclipboard("https://discord.gg/a4PsqfK6")
            Fluent:Notify({
                Title = "Notification",
                Content = "Successfully copied to the clipboard",
                SubContent = "", -- Optional
                Duration = 3 
            })
        end
    })



    Tabs.About:AddButton({
        Title = "Youtube",
        Description = "Copy link to Subscribe to Youtube channel!",
        Callback = function()
            setclipboard("https://www.youtube.com/@SLKgamingSSR")
            Fluent:Notify({
                Title = "Notification",
                Content = "Successfully copied to the clipboard!",
                SubContent = "", -- Optional
                Duration = 3 
            })
        end
    })


    Tabs.About:AddButton({
        Title = "Facebook",
        Description = "Copy link to join facebook group!",
        Callback = function()
            setclipboard("https://www.facebook.com/groups/1180845463307087/?ref=share&mibextid=NSMWBT")
            Fluent:Notify({
                Title = "Notification",
                Content = "Successfully copied to the clipboard!",
                SubContent = "", -- Optional
                Duration = 3 
            })
        end
    })

-- Tabs.Main

-- ðŸŒ± Auto Harvest (Dropdown Speed + Teleport Bypass Distance)
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Backpack = LocalPlayer:WaitForChild("Backpack")
local Workspace = game:GetService("Workspace")

-- TÃ¬m plot farm cá»§a mÃ¬nh
local farms = Workspace:FindFirstChild("Farm")
local plot = nil
for _, v in farms:GetDescendants() do
    if v.Name == "Owner" and v.Value == LocalPlayer.Name then
        plot = v.Parent.Parent
        break
    end
end

if not plot then
    LocalPlayer:Kick("Plot not found!")
end

local plant_physical = plot:WaitForChild("Plants_Physical")

-- ðŸŒ± Báº£ng tá»‘c Ä‘á»™ thu hoáº¡ch
local speedDelays = {
    ["Slow"] = 1,      -- 1 giÃ¢y
    ["Normal"] = 0.1,  -- 0.1 giÃ¢y
    ["Fast"] = 0.01,   -- 0.01 giÃ¢y
    ["Super"] = 0.001, -- 0.001 giÃ¢y
}

-- State
local autoHarvestThread
local selectedSpeed = "Normal"
local harvestToggle = false

-- Function check backpack Ä‘áº§y
local function isFull()
    return #Backpack:GetChildren() > 200
end

-- ðŸŒ± HÃ m harvest prompt tá»« xa (Ã©p khoáº£ng cÃ¡ch)
local function harvestPrompt(prompt)
    -- Ã‰p khoáº£ng cÃ¡ch cá»±c lá»›n
    prompt.MaxActivationDistance = 999999999
    pcall(function()
        fireproximityprompt(prompt)
    end)
end

-- ðŸŒ± Auto Harvest Loop
local function startAutoHarvest()
    autoHarvestThread = task.spawn(function()
        while harvestToggle do
            local delay = speedDelays[selectedSpeed] or 0.1

            if not isFull() then
                local prompts = {}
                -- gom prompt láº¡i 1 láº§n â†’ trÃ¡nh lag do quÃ©t liÃªn tá»¥c
                for _, v in plant_physical:GetDescendants() do
                    if v:IsA("ProximityPrompt") then
                        table.insert(prompts, v)
                    end
                end

                for _, prompt in ipairs(prompts) do
                    task.defer(function()
                        harvestPrompt(prompt)
                    end)
                    task.wait(delay)
                end
            else
                -- Náº¿u full thÃ¬ nghá»‰ 2 giÃ¢y â†’ trÃ¡nh lag/kick
                task.wait(2)
            end

            task.wait()
        end
    end)
end

local function stopAutoHarvest()
    if autoHarvestThread then
        task.cancel(autoHarvestThread)
        autoHarvestThread = nil
    end
end

-- === ðŸŒ± GUI Bindings (Fluent Style) ===
-- Dropdown chá»n tá»‘c Ä‘á»™
local harvestDropdown = Tabs.Main:AddDropdown("HarvestSpeedDropdown", {
    Title = "Harvest Speed",
    Values = { "Slow", "Normal", "Fast", "Super" },
    Default = "Normal"
})

harvestDropdown:OnChanged(function(val)
    selectedSpeed = val
end)

-- Toggle Auto Harvest
local harvestToggleUI = Tabs.Main:AddToggle("HarvestAuraToggle", {
    Title = "Auto Harvest",
    Default = false
})

harvestToggleUI:OnChanged(function(Value)
    harvestToggle = Value
    if Value then
        startAutoHarvest()
    else
        stopAutoHarvest()
    end
end)

             

-- Tabs.Player


local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

-- =======================
-- 3. NoClip
-- =======================
local noclipToggle = Tabs.Player:AddToggle("NoClipToggle", {
    Title = "NoClip",
    Default = false
})

local noclipConnection

local function startNoClip()
    local char = LocalPlayer.Character
    if not char then return end
    local rootPart = char:FindFirstChild("HumanoidRootPart")
    if not rootPart then return end

    noclipConnection = RunService.Stepped:Connect(function()
        if noclipToggle.Value then
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") and part.CanCollide then
                    part.CanCollide = false
                end
            end
        end
    end)
end

local function stopNoClip()
    local char = LocalPlayer.Character
    if char then
        for _, part in pairs(char:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true -- reset láº¡i máº·c Ä‘á»‹nh
            end
        end
    end
    if noclipConnection then
        noclipConnection:Disconnect()
        noclipConnection = nil
    end
end

noclipToggle:OnChanged(function(value)
    if value then
        startNoClip()
    else
        stopNoClip()
    end
end)


-- Toggle Nháº£y VÃ´ Háº¡n trong Tabs.Player
local infiniteJumpToggle = Tabs.Player:AddToggle("InfiniteJumpToggle", {
    Title = "Infinite Jump",
    Default = false
})

local infiniteJumpConnection

-- HÃ m báº­t/táº¯t nháº£y vÃ´ háº¡n
local function startInfiniteJump()
    local Players = game:GetService("Players")
    local LocalPlayer = Players.LocalPlayer

    infiniteJumpConnection = game:GetService("UserInputService").JumpRequest:Connect(function()
        if infiniteJumpToggle.Value then
            local char = LocalPlayer.Character
            if char and char:FindFirstChildOfClass("Humanoid") then
                char.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            end
        end
    end)
end

local function stopInfiniteJump()
    if infiniteJumpConnection then
        infiniteJumpConnection:Disconnect()
        infiniteJumpConnection = nil
    end
end

infiniteJumpToggle:OnChanged(function(Value)
    if Value then
        startInfiniteJump()
    else
        stopInfiniteJump()
    end
end)


    Tabs.Player:AddSection("â†³ Flying")



local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")

local player = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- State
local flying = false
local flySpeed = 50
local bodyVelocity, bodyGyro, renderConn

-- Function: Start Flying
local function startFlying()
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoid = character:WaitForChild("Humanoid")
	local HRP = character:WaitForChild("HumanoidRootPart")

	local seat = humanoid.SeatPart
	local attachPart = seat or HRP

	-- Body movers
	bodyVelocity = Instance.new("BodyVelocity")
	bodyVelocity.MaxForce = Vector3.new(1e5, 1e5, 1e5)
	bodyVelocity.Velocity = Vector3.zero
	bodyVelocity.Parent = attachPart

	bodyGyro = Instance.new("BodyGyro")
	bodyGyro.MaxTorque = Vector3.new(1e5, 1e5, 1e5)
	bodyGyro.CFrame = attachPart.CFrame
	bodyGyro.Parent = attachPart

	humanoid:ChangeState(Enum.HumanoidStateType.Physics)

	-- Movement logic
	renderConn = RunService.RenderStepped:Connect(function()
		if attachPart and Camera then
			local camCF = Camera.CFrame
			local moveDir = humanoid.MoveDirection

			local moveVec = Vector3.zero

			if moveDir.Magnitude > 0 then
				-- Dá»±ng vector bay theo hÆ°á»›ng nhÃ¬n
				local forward = camCF.LookVector
				local flatForward = Vector3.new(forward.X, 0, forward.Z).Unit
				local verticalInfluence = forward.Unit.Y

				-- XÃ¡c Ä‘á»‹nh xem Ä‘ang Ä‘i tiáº¿n hay lÃ¹i
				local movingForward = flatForward:Dot(moveDir.Unit) > 0.1
				local movingBackward = flatForward:Dot(moveDir.Unit) < -0.1

				local yVelocity = 0

				-- Náº¿u Ä‘ang Ä‘i tiáº¿n hoáº·c lÃ¹i, Ã¡p dá»¥ng hÆ°á»›ng nhÃ¬n Ä‘á»ƒ tÄƒng giáº£m Ä‘á»™ cao
				if movingForward then
					yVelocity = verticalInfluence
				elseif movingBackward then
					yVelocity = -verticalInfluence
				end

				-- Káº¿t há»£p chuyá»ƒn Ä‘á»™ng ngang + dá»c
				moveVec = Vector3.new(moveDir.X, yVelocity, moveDir.Z).Unit
			end

			bodyVelocity.Velocity = moveVec * flySpeed
			bodyGyro.CFrame = camCF
		end
	end)

	flying = true
end

-- Function: Stop Flying
local function stopFlying()
	flying = false

	if renderConn then renderConn:Disconnect() renderConn = nil end
	if bodyVelocity then bodyVelocity:Destroy() bodyVelocity = nil end
	if bodyGyro then bodyGyro:Destroy() bodyGyro = nil end

	-- Fix: KhÃ´i phá»¥c tráº¡ng thÃ¡i nhÃ¢n váº­t
	local character = player.Character
	if character then
		local humanoid = character:FindFirstChildOfClass("Humanoid")
		if humanoid then
			humanoid:ChangeState(Enum.HumanoidStateType.GettingUp)
		end
	end
end

-- Auto handle respawn
Players.LocalPlayer.CharacterAdded:Connect(function()
	if flying then
		task.wait(1)
		startFlying()
	end
end)

-- ðŸŸ¢ Slider lÃªn trÆ°á»›c Toggle
local FlySpeedSlider = Tabs.Player:AddSlider("FlySpeedSlider", {
	Title = "Fly Speed",
	Default = 50,
	Min = 10,
	Max = 300,
	Rounding = 0,
})

FlySpeedSlider:OnChanged(function(Value)
	flySpeed = Value
end)

local FlyToggle = Tabs.Player:AddToggle("FlyToggle", {
	Title = "Fly New",
	Default = false
})

FlyToggle:OnChanged(function(Value)
	if Value then
		startFlying()
	else
		stopFlying()
	end
end)


    Tabs.Player:AddSection("â†³ Walk Speed")


-- === Walk Speed Setup ===
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")

local defaultSpeed = 16
local maxSpeed = 300
local currentSpeed = defaultSpeed
local walkSpeedEnabled = false

-- Cáº­p nháº­t Humanoid khi respawn
LocalPlayer.CharacterAdded:Connect(function(char)
    Character = char
    Humanoid = Character:WaitForChild("Humanoid")
    if walkSpeedEnabled then
        Humanoid.WalkSpeed = currentSpeed
    else
        Humanoid.WalkSpeed = defaultSpeed
    end
end)

-- === GUI Bindings ===
-- Slider Walk Speed
Tabs.Player:AddSlider("WalkSpeedSlider", {
    Title = "Set Speed",
    Min = 16,
    Max = maxSpeed,
    Default = defaultSpeed,
    Rounding = 1,
}):OnChanged(function(value)
    currentSpeed = value
    if walkSpeedEnabled and Humanoid then
        Humanoid.WalkSpeed = currentSpeed
    end
end)

-- Toggle báº­t/táº¯t Walk Speed
Tabs.Player:AddToggle("WalkSpeedToggle", {
    Title = "Walk Speed",
    Default = false,
}):OnChanged(function(enabled)
    walkSpeedEnabled = enabled
    if Humanoid then
        if walkSpeedEnabled then
            Humanoid.WalkSpeed = currentSpeed
        else
            Humanoid.WalkSpeed = defaultSpeed
        end
    end
end)


    Tabs.Player:AddSection("â†³ Jump Power")


-- === High Jump Setup ===
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")

local defaultJump = 50      -- Máº·c Ä‘á»‹nh giá»‘ng Roblox
local maxJump = 300          -- Max Roblox JumpPower
local currentJump = defaultJump
local jumpEnabled = false

-- Cáº­p nháº­t Humanoid khi respawn
LocalPlayer.CharacterAdded:Connect(function(char)
    Character = char
    Humanoid = Character:WaitForChild("Humanoid")
    if jumpEnabled then
        Humanoid.JumpPower = currentJump
    else
        Humanoid.JumpPower = defaultJump
    end
end)

-- === GUI Bindings ===
-- Slider Jump Power
Tabs.Player:AddSlider("JumpPowerSlider", {
    Title = "Jump Power",
    Min = 50,
    Max = maxJump,
    Default = defaultJump,
    Rounding = 1,
}):OnChanged(function(value)
    currentJump = value
    if jumpEnabled and Humanoid then
        Humanoid.JumpPower = currentJump
    end
end)

-- Toggle báº­t/táº¯t High Jump
Tabs.Player:AddToggle("HighJumpToggle", {
    Title = "High Jump",
    Default = false,
}):OnChanged(function(enabled)
    jumpEnabled = enabled
    if Humanoid then
        if jumpEnabled then
            Humanoid.JumpPower = currentJump
        else
            Humanoid.JumpPower = defaultJump
        end
    end
end)

-- Tabs.Shop

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = game:GetService("Players").LocalPlayer

-- Dá»¯ liá»‡u
local seed_data = require(ReplicatedStorage.Data:WaitForChild("SeedData"))
local egg_data = require(ReplicatedStorage.Data:WaitForChild("PetEggData"))
local gear_data = require(ReplicatedStorage.Data:WaitForChild("GearData"))
local cosmetic_data = require(ReplicatedStorage.Data:WaitForChild("CosmeticItemShopData"))

-- Danh sÃ¡ch item
local seed_names, egg_names, gear_names, cosmetic_names = {}, {}, {}, {}
for i,v in seed_data do if v.StockChance>0 then table.insert(seed_names,i) end end
for _,v in egg_data do if v.StockChance>0 then table.insert(egg_names,v.EggName) end end
for _,v in gear_data do if v.StockChance>0 then table.insert(gear_names,v.GearName) end end
for _,v in cosmetic_data do table.insert(cosmetic_names,v.CosmeticName) end

-- State
local auto_buy_seeds, auto_buy_eggs, auto_buy_gears, auto_buy_cosmetics = false, false, false, false
local selected_seeds, selected_eggs, selected_gears, selected_cosmetics = {}, {}, {}, {}
local BUY_DELAY = 0.1

-- Bá»™ Ä‘áº¿m thÃ´ng bÃ¡o
local purchase_counts = {}

-- HÃ m loop an toÃ n cho toggle
local function safeToggleLoop(enabledFlag, func)
    task.spawn(function()
        while enabledFlag() do
            local ok, err = pcall(func)
            if not ok then warn("Error in auto-buy loop:", err) end
            task.wait(BUY_DELAY)
        end
    end)
end

-- HÃ m thÃ´ng bÃ¡o Fluent GUI
local function notifyItem(name, count)
    Fluent:Notify({
        Title = "Hutao Hub [Free]",
        Content = "You Bought " ..name.." x"..count,
        Duration = 2
    })
end

    Tabs.Shop:AddSection("â†³ Seed")


-- === Seed Shop Multi-select ===
Tabs.Shop:AddDropdown("SelectSeed", { Title = "Select Seed", Values = seed_names, Multi = true, Default = {} })
    :OnChanged(function(selection)
        selected_seeds = {}
        for item, isSelected in pairs(selection) do
            if isSelected then table.insert(selected_seeds, item) end
        end
    end)

Tabs.Shop:AddToggle("AutoBuySeed", { Title = "Auto Buy Seed", Default = false })
    :OnChanged(function(enabled)
        auto_buy_seeds = enabled
        safeToggleLoop(function() return auto_buy_seeds end, function()
            local shop = LocalPlayer.PlayerGui.Seed_Shop.Frame.ScrollingFrame:GetChildren()
            for _, v in shop do
                if table.find(selected_seeds, v.Name) then
                    local stock = tonumber(v.Main_Frame.Stock_Text.Text:match("%d+")) or 0
                    if stock > 0 then
                        ReplicatedStorage.GameEvents.BuySeedStock:FireServer(v.Name)
                        purchase_counts[v.Name] = (purchase_counts[v.Name] or 0) + 1
                        notifyItem(v.Name, purchase_counts[v.Name])
                        task.wait(BUY_DELAY)
                    end
                end
            end
        end)
    end)


    Tabs.Shop:AddSection("â†³ Eggs")


-- === Egg Shop Multi-select ===
Tabs.Shop:AddDropdown("SelectEgg", { Title = "Select Egg", Values = egg_names, Multi = true, Default = {} })
    :OnChanged(function(selection)
        selected_eggs = {}
        for item, isSelected in pairs(selection) do
            if isSelected then table.insert(selected_eggs, item) end
        end
    end)

Tabs.Shop:AddToggle("AutoBuyEgg", { Title = "Auto Buy Egg", Default = false })
    :OnChanged(function(enabled)
        auto_buy_eggs = enabled
        safeToggleLoop(function() return auto_buy_eggs end, function()
            local locations = workspace.NPCS["Pet Stand"].EggLocations:GetChildren()
            for i,v in ipairs(locations) do
                if table.find(selected_eggs, v.Name) and not v:GetAttribute("RobuxEggOnly") then
                    ReplicatedStorage.GameEvents.BuyPetEgg:FireServer(i-3)
                    purchase_counts[v.Name] = (purchase_counts[v.Name] or 0) + 1
                    notifyItem(v.Name, purchase_counts[v.Name])
                    task.wait(BUY_DELAY)
                end
            end
        end)
    end)

    Tabs.Shop:AddSection("â†³ Gear")


-- === Gear Shop Multi-select ===
Tabs.Shop:AddDropdown("SelectGear", { Title = "Select Gear", Values = gear_names, Multi = true, Default = {} })
    :OnChanged(function(selection)
        selected_gears = {}
        for item, isSelected in pairs(selection) do
            if isSelected then table.insert(selected_gears, item) end
        end
    end)

Tabs.Shop:AddToggle("AutoBuyGear", { Title = "Auto Buy Gear", Default = false })
    :OnChanged(function(enabled)
        auto_buy_gears = enabled
        safeToggleLoop(function() return auto_buy_gears end, function()
            local shop = LocalPlayer.PlayerGui.Gear_Shop.Frame.ScrollingFrame:GetChildren()
            for _, v in shop do
                if table.find(selected_gears, v.Name) then
                    local stock = tonumber(v.Main_Frame.Stock_Text.Text:match("%d+")) or 0
                    if stock > 0 then
                        ReplicatedStorage.GameEvents.BuyGearStock:FireServer(v.Name)
                        purchase_counts[v.Name] = (purchase_counts[v.Name] or 0) + 1
                        notifyItem(v.Name, purchase_counts[v.Name])
                        task.wait(BUY_DELAY)
                    end
                end
            end
        end)
    end)


    Tabs.Shop:AddSection("â†³ Cosmetic")


-- === Cosmetic Shop Multi-select ===
Tabs.Shop:AddDropdown("SelectCosmetic", { Title = "Select Cosmetic", Values = cosmetic_names, Multi = true, Default = {} })
    :OnChanged(function(selection)
        selected_cosmetics = {}
        for item, isSelected in pairs(selection) do
            if isSelected then table.insert(selected_cosmetics, item) end
        end
    end)

Tabs.Shop:AddToggle("AutoBuyCosmetic", { Title = "Auto Buy Cosmetic", Default = false })
    :OnChanged(function(enabled)
        auto_buy_cosmetics = enabled
        safeToggleLoop(function() return auto_buy_cosmetics end, function()
            local content = LocalPlayer.PlayerGui.CosmeticShop_UI.CosmeticShop.Main.Holder.Shop.ContentFrame:GetDescendants()
            for _, v in content do
                if table.find(selected_cosmetics, v.Name) then
                    local stock = tonumber(v.Main.Stock.STOCK_TEXT.Text:match("%d+")) or 0
                    if stock > 0 then
                        if v.Parent.Name == "BottomSegment" then
                            ReplicatedStorage.GameEvents.BuyCosmeticItem:FireServer(v.Name)
                        elseif v.Parent.Name == "TopSegment" then
                            ReplicatedStorage.GameEvents.BuyCosmeticCrate:FireServer(v.Name)
                        end
                        purchase_counts[v.Name] = (purchase_counts[v.Name] or 0) + 1
                        notifyItem(v.Name, purchase_counts[v.Name])
                        task.wait(BUY_DELAY)
                    end
                end
            end
        end)
    end)

-- Tabs.Misc

-- ðŸŒ Anti AFK Script (Fluent GUI)
local Players = game:GetService("Players")
local VirtualUser = game:GetService("VirtualUser")

local LocalPlayer = Players.LocalPlayer
local antiAfkEnabled = false

-- NgÄƒn bá»‹ AFK
LocalPlayer.Idled:Connect(function()
    if antiAfkEnabled then
        VirtualUser:CaptureController()
        VirtualUser:ClickButton2(Vector2.new())
    end
end)

-- === GUI Bindings (Fluent Style) ===
local antiAfkToggle = Tabs.Misc:AddToggle("AntiAFKToggle", {
    Title = "Anti AFK",
    Default = false,
    Tooltip = "Prevents you from getting disconnected due to inactivity"
})

antiAfkToggle:OnChanged(function(Value)
    antiAfkEnabled = Value
end)


    Tabs.Misc:AddSection("â†³ Show")

-- FPS + Ping Drawing Setup
local showFPS = true
local showPing = true

local fpsText = Drawing.new("Text")
fpsText.Size = 16
fpsText.Position = Vector2.new(workspace.CurrentCamera.ViewportSize.X - 100, 10)
fpsText.Color = Color3.fromRGB(0, 255, 0)
fpsText.Center = false
fpsText.Outline = true
fpsText.Visible = showFPS

local msText = Drawing.new("Text")
msText.Size = 16
msText.Position = Vector2.new(workspace.CurrentCamera.ViewportSize.X - 100, 30)
msText.Color = Color3.fromRGB(0, 255, 0)
msText.Center = false
msText.Outline = true
msText.Visible = showPing

local fpsCounter = 0
local fpsLastUpdate = tick()

RunService.RenderStepped:Connect(function()
    fpsCounter += 1
    if tick() - fpsLastUpdate >= 1 then
        -- Update FPS
        if showFPS then
            fpsText.Text = "FPS: " .. tostring(fpsCounter)
            fpsText.Visible = true
        else
            fpsText.Visible = false
        end

        -- Update Ping
        if showPing then
            local pingStat = game:GetService("Stats").Network.ServerStatsItem["Data Ping"]
            local ping = pingStat and math.floor(pingStat:GetValue()) or 0
            msText.Text = "Ping: " .. ping .. " ms"

            if ping <= 60 then
                msText.Color = Color3.fromRGB(0, 255, 0)
            elseif ping <= 120 then
                msText.Color = Color3.fromRGB(255, 165, 0)
            else
                msText.Color = Color3.fromRGB(255, 0, 0)
            end

            msText.Visible = true
        else
            msText.Visible = false
        end

        fpsCounter = 0
        fpsLastUpdate = tick()
    end
end)

-- âœ… Fluent GUI Toggles chuáº©n
local fpsToggle = Tabs.Misc:AddToggle("ShowFPSToggle", {
    Title = "Show FPS",
    Default = true
})
fpsToggle:OnChanged(function(val)
    showFPS = val
    fpsText.Visible = val
end)

local pingToggle = Tabs.Misc:AddToggle("ShowPingToggle", {
    Title = "Show Ping",
    Default = true
})
pingToggle:OnChanged(function(val)
    showPing = val
    msText.Visible = val
end)

-- Tabs.Settings


local AexecToggle = Tabs.Settings:AddToggle("AexecToggle", {Title = "Auto Execute", Default = false })
AexecToggle:OnChanged(function(Value)
    if Value then
        task.spawn(function()
            pcall(function()
                if queue_on_teleport then
                    local HutaoHubScript1 = [[
task.wait(3)
loadstring(game:HttpGet('https://raw.githubusercontent.com/hungquan99/SkullHub/main/loader.lua'))()
]]
                    queue_on_teleport(HutaoHubScript1)
                end
            end)
        end)
        Fluent:Notify({
            Title = "Hutao HUB",
            Content = "Auto execute is enabled!",
            Duration = 5
        })
    else
        Fluent:Notify({
            Title = "Hutao HUB",
            Content = "Auto execute is disabled!",
            Duration = 5
        })
    end
end)

SaveManager:SetLibrary(Fluent)
InterfaceManager:SetLibrary(Fluent)

-- Ignore keys that are used by ThemeManager.
-- (we dont want configs to save themes, do we?)
SaveManager:IgnoreThemeSettings()

-- You can add indexes of elements the save manager should ignore
SaveManager:SetIgnoreIndexes({})

-- use case for doing it this way:
-- a script hub could have themes in a global folder
-- and game configs in a separate folder per game
InterfaceManager:SetFolder("Hutao HUB")
SaveManager:SetFolder("Hutao HUB/Grow A Garden")

InterfaceManager:BuildInterfaceSection(Tabs.Settings)
SaveManager:BuildConfigSection(Tabs.Settings)

-- Select First Tab By Default
Window:SelectTab(1)

Fluent:Notify({ Title = "Hutao HUB", Content = "Grow A Garden script loaded successfully!", Duration = 5 })
SaveManager:LoadAutoloadConfig()


-- ðŸŸ¢ DRAGGABLE UI BUTTON WITH ENHANCED CLICK AND HOVER ANIMATIONS
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")
local VirtualInputManager = game:GetService("VirtualInputManager")

local ExistingUI = CoreGui:FindFirstChild("HutaoHubMinimizeUI")
if ExistingUI then
    ExistingUI:Destroy()
end

-- Create Floating UI
local DragUI = Instance.new("ScreenGui")
DragUI.Name = "HutaoHubMinimizeUI"
DragUI.ResetOnSpawn = false
DragUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling -- Ensures highest rendering priority
DragUI.Parent = CoreGui -- Overrides all other UI elements

-- Create Circular Button (Draggable + Clickable)
local Button = Instance.new("ImageButton")
Button.Parent = DragUI
Button.Size = UDim2.new(0, 50, 0, 50) -- Adjust size if needed
Button.Position = UDim2.new(0, 10, 1, -85) -- Initial position
Button.BackgroundColor3 = Color3.fromRGB(30, 30, 30) -- Windows 11 Style
Button.BackgroundTransparency = 0.3 -- Semi-transparent
Button.BorderSizePixel = 0
Button.ClipsDescendants = true
Button.Image = "rbxassetid://90508203972003" -- Replace with your custom image ID
Button.ScaleType = Enum.ScaleType.Fit
Button.Active = true -- Allows drag functionality
Button.ZIndex = 1000 -- Ensure it stays on top

-- Make UI Circular
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(1, 0) -- Full circle
UICorner.Parent = Button

-- Tween Info for Animations
local tweenInfo = TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

-- Function to simulate RightShift key press
local function SimulateKeyPress()
    VirtualInputManager:SendKeyEvent(true, minimizeUI, false, game)
    task.wait(0.1)
    VirtualInputManager:SendKeyEvent(false, minimizeUI, false, game)
end

-- Click Animation & UI Toggle (Only if NOT dragged too much)
local isDragging = false
local dragThreshold = 10 -- Allow small movement without canceling click

Button.MouseButton1Click:Connect(function()
    if isDragging then return end -- Prevent click after large dragging

    -- Enhanced Click Animation
    local tween = TweenService:Create(Button, tweenInfo, {
        BackgroundTransparency = 0.5,
        Size = UDim2.new(0, 45, 0, 45),
        Rotation = 5
    })
    tween:Play()
    task.wait(0.1)
    local tweenBack = TweenService:Create(Button, tweenInfo, {
        BackgroundTransparency = 0.3,
        Size = UDim2.new(0, 50, 0, 50),
        Rotation = 0
    })
    tweenBack:Play()

    -- Simulate RightShift to Toggle UI
    SimulateKeyPress()
end)

-- Hover Animation
Button.MouseEnter:Connect(function()
    TweenService:Create(Button, tweenInfo, {Size = UDim2.new(0, 55, 0, 55)}):Play()
end)

Button.MouseLeave:Connect(function()
    TweenService:Create(Button, tweenInfo, {Size = UDim2.new(0, 50, 0, 50)}):Play()
end)

-- Dragging Logic for PC & Mobile
local dragging, dragStart, startPos

local function StartDrag(input)
    isDragging = false -- Reset dragging state
    dragging = true
    dragStart = input.Position
    startPos = Button.Position

    input.Changed:Connect(function()
        if input.UserInputState == Enum.UserInputState.End then
            dragging = false
        end
    end)
end

local function OnDrag(input)
    if dragging then
        local delta = (input.Position - dragStart).Magnitude
        if delta > dragThreshold then -- Only mark as dragged if movement exceeds threshold
            isDragging = true
        end
        Button.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + (input.Position.X - dragStart.X),
            startPos.Y.Scale,
            startPos.Y.Offset + (input.Position.Y - dragStart.Y)
        )
    end
end

-- Dragging Support for PC & Mobile (on the same button)
Button.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        StartDrag(input)
    end
end)

Button.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        OnDrag(input)
    end
end)